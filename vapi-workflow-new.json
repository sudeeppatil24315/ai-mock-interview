{
  "name": "Interview Generation Workflow",
  "description": "AI-powered interview generation workflow for PYT4 interviewer",
  "globalPrompt": "You are PYT4, a professional AI interviewer assistant. Your task is to help users create personalized interview questions by collecting their requirements through a natural conversation. Be friendly, professional, and guide users step by step.",
  "globalVoice": {
    "provider": "vapi",
    "voiceId": "Elliot"
  },
  "nodes": [
    {
      "id": "introduction",
      "name": "introduction",
      "type": "conversation",
      "isStart": true,
      "prompt": "You are PYT4, interview assistant. Start with: Hi, I am PYT4, your personal interviewer. I'll help you create personalized interview questions. Are you ready to get started?",
      "transcriber": {
        "model": "nova-2-meeting",
        "provider": "deepgram"
      },
      "messagePlan": {
        "firstMessage": "Hi, I am PYT4, your personal interviewer. I'll help you create personalized interview questions. Are you ready to get started?"
      },
      "toolIds": []
    },
    {
      "id": "collect_requirements",
      "name": "collect_requirements",
      "type": "conversation",
      "prompt": "Great! Let's set up your interview practice. I need to collect a few details from you:\n\n1. Target role - What role are you preparing for? (e.g., Software Engineer, Data Scientist, Product Manager)\n2. Experience level - What's your experience level? (Entry-level, Mid-level, or Senior)\n3. Tech stack - Which technology stack should the questions focus on? (e.g., Java, Python, React, AWS, etc.)\n4. Interview type - What type of interview would you like to practice? (Behavioural, Technical, or Mixed)\n5. Number of questions - How many interview questions would you like me to generate?\n\nPlease provide all these details so I can create the perfect interview for you.",
      "transcriber": {
        "model": "nova-2-meeting",
        "provider": "deepgram"
      },
      "variableExtractionPlan": {
        "output": [
          {
            "type": "string",
            "title": "role",
            "description": "The job role the user is preparing for"
          },
          {
            "type": "string",
            "title": "level",
            "description": "The experience level (entry, mid, senior)"
          },
          {
            "type": "string",
            "title": "techstack",
            "description": "The technology stack to focus on"
          },
          {
            "type": "string",
            "title": "type",
            "description": "The type of interview (technical, behavioral, mixed)"
          },
          {
            "type": "number",
            "title": "amount",
            "description": "Number of questions to generate"
          },
          {
            "type": "string",
            "title": "userid",
            "description": "User ID for the interview"
          }
        ]
      },
      "messagePlan": {
        "firstMessage": "Great! Let's set up your interview practice. I need to collect a few details from you:\n\n1. What role are you preparing for?\n2. What's your experience level?\n3. Which technology stack should we focus on?\n4. What type of interview would you like? (Technical, Behavioral, or Mixed)\n5. How many questions would you like me to generate?"
      },
      "toolIds": []
    },
    {
      "id": "confirmation",
      "name": "confirmation",
      "type": "conversation",
      "prompt": "Confirm the details with the user before generating the interview.",
      "transcriber": {
        "model": "nova-2-meeting",
        "provider": "deepgram"
      },
      "messagePlan": {
        "firstMessage": "Perfect! Let me confirm: You want a {{type}} interview for a {{role}} role with {{techstack}} technology, at {{level}} level, and you'd like {{amount}} questions. Should I generate your personalized interview now?"
      },
      "toolIds": []
    },
    {
      "id": "api_request",
      "name": "api_request",
      "type": "tool",
      "tool": {
        "url": "https://ai-mock-interview-cm46.vercel.app/api/vapi/generate",
        "body": {
          "type": "object",
          "required": ["role", "level", "techstack", "type", "amount", "userid"],
          "properties": {
            "role": {
              "type": "string",
              "default": "{{role}}"
            },
            "level": {
              "type": "string",
              "default": "{{level}}"
            },
            "techstack": {
              "type": "string",
              "default": "{{techstack}}"
            },
            "type": {
              "type": "string",
              "default": "{{type}}"
            },
            "amount": {
              "type": "number",
              "default": "{{amount}}"
            },
            "userid": {
              "type": "string",
              "default": "{{userid}}"
            }
          }
        },
        "name": "generateInterview",
        "type": "apiRequest",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json"
        },
        "messages": [
          {
            "type": "request-start",
            "content": "Please hold on. I'm generating your personalized interview questions...",
            "blocking": true
          },
          {
            "type": "request-complete",
            "content": "Excellent! Your interview has been generated successfully. You can now start your practice interview!",
            "blocking": false
          },
          {
            "type": "request-failed",
            "content": "Sorry, there was an issue generating your interview. Please try again later.",
            "blocking": false
          }
        ]
      }
    },
    {
      "id": "end_call",
      "name": "end_call",
      "type": "tool",
      "tool": {
        "type": "endCall",
        "messages": [
          {
            "type": "request-start",
            "content": "Thank you for your time! Your personalized interview is ready. You can now start practicing. Good luck!",
            "blocking": true
          }
        ]
      }
    }
  ],
  "edges": [
    {
      "from": "introduction",
      "to": "collect_requirements",
      "condition": {
        "type": "ai",
        "prompt": "if the user said yes or is ready to proceed"
      }
    },
    {
      "from": "collect_requirements",
      "to": "confirmation",
      "condition": {
        "type": "ai",
        "prompt": "if user provided all required variables (role, level, techstack, type, amount, userid)"
      }
    },
    {
      "from": "confirmation",
      "to": "api_request",
      "condition": {
        "type": "ai",
        "prompt": "if user confirmed and said yes to generate the interview"
      }
    },
    {
      "from": "api_request",
      "to": "end_call",
      "condition": {
        "type": "ai",
        "prompt": "after API request is completed (success or failure)"
      }
    }
  ]
}
